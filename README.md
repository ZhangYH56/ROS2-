# 🤖 机械工程硕士 ROS 2 完整学习技术路线

> **适用对象**：机械工程 (ME) / 控制工程 硕士研究生
> **核心逻辑**：发挥运动学/动力学数学优势，补齐 Linux/C++ 编程短板，主攻 ROS 2。
> **版本建议**：ROS 2 Humble (Ubuntu 22.04) 或 ROS 2 Jazzy (Ubuntu 24.04)

---

## 📅 阶段 0：基础准备（磨刀不误砍柴工）
**⏱️ 耗时：1-2 周**
*目标：打造稳定的开发环境，熟悉 Linux 操作与编程规范。*

### 1. 操作系统：Linux (Ubuntu)
- [ ] **安装系统**：推荐双系统安装 **Ubuntu 22.04 LTS**。
    - *避坑指南*：尽量避免使用虚拟机（VMware），连接 USB 硬件（雷达/单片机）时会有各种延迟和驱动问题。
- [ ] **终端命令 (Shell)**：
    - 熟练使用 `ls`, `cd`, `mkdir`, `cp`, `mv`, `rm`, `grep`, `chmod`, `sudo`。
- [ ] **环境配置**：
    - 理解 `.bashrc` 的作用（环境变量）。
    - 掌握 Vim 或 Nano 的简单编辑操作。

### 2. 编程语言基础
- [ ] **Python (脚本与快速验证)**：
    - 重点：类 (Class) 与对象、多线程 (Threading)、**NumPy 矩阵运算**。
- [ ] **C++ (高性能控制与算法)**：
    - 重点：**C++11/14 标准**。
    - 必学：智能指针 (`std::shared_ptr`)、Lambda 表达式、STL 容器 (`vector`, `map`)、回调函数。
- [ ] **开发工具**：
    - 编辑器：**VS Code** (安装 C++ 和 Python 插件)。
    - 版本管理：**Git** (代码托管与版本回退)。

---

## 🚀 阶段 1：ROS 2 核心概念与通信机制
**⏱️ 耗时：2-3 周**
*目标：理解“节点化”编程思想，跑通节点间的通信。*

### 1. 核心概念 (必背)
- [ ] **Node (节点)**：独立的进程，理解生命周期。
- [ ] **Topic (话题)**：异步通信 (Pub/Sub)，用于传感器数据流（如雷达、里程计）。
- [ ] **Service (服务)**：同步通信 (Req/Res)，用于开关、复位等指令。
- [ ] **Action (动作)**：长时任务（带反馈），用于导航点或机械臂轨迹执行。
- [ ] **Parameter (参数)**：动态调整节点配置（如 PID 参数）。

### 2. 构建系统与工具
- [ ] **编译工具**：熟练使用 `colcon build`。
- [ ] **包结构**：理解 `package.xml` 和 `CMakeLists.txt` / `setup.py`。
- [ ] **常用命令**：`ros2 topic list`, `ros2 node info`, `rqt_graph`。

### 3. 实践作业
- [ ] 编写一个 Publisher 发送模拟速度数据。
- [ ] 编写一个 Subscriber 接收并计算平均值。
- [ ] 实现一个简单的两数相加 Service。

---

## 🛠️ 阶段 2：机器人仿真与坐标变换 (ME 强项)
**⏱️ 耗时：3 周**
*目标：利用机械背景，在虚拟环境中搭建物理属性准确的机器人。*

### 1. 机器人描述 (URDF/Xacro)
- [ ] **建模**：使用 XML 描述 Link (连杆) 和 Joint (关节)。
- [ ] **物理属性 (ME 重点)**：
    - **Inertia (转动惯量矩阵)**：直接影响仿真中的动力学表现。
    - **Collision (碰撞模型)**：简化几何体以减少计算量。
    - **Visual (可视化模型)**：用于看着好看。

### 2. 坐标变换 (TF2) —— ROS 的灵魂
- [ ] **理解变换树**：`map` -> `odom` -> `base_link` -> `sensor_link`。
- [ ] **数学原理**：旋转矩阵、欧拉角、**四元数 (Quaternion)** 的相互转换。
- [ ] **工具使用**：
    - `tf2_echo`：查看两个坐标系的变换关系。
    - `static_transform_publisher`：发布固定的传感器安装位置。

### 3. 仿真环境
- [ ] **Gazebo / Ignition**：加载 URDF，添加摩擦力、重力等物理参数。
- [ ] **Rviz2**：可视化传感器数据（激光点云、摄像头图像、TF 树）。

---

## 🧭 阶段 3：移动机器人导航 (Navigation 2)
**⏱️ 耗时：3-4 周**
*目标：让小车学会定位、建图与路径规划。*

### 1. SLAM (即时定位与地图构建)
- [ ] **算法原理**：理解粒子滤波、图优化。
- [ ] **工具**：使用 `slam_toolbox` (推荐) 或 Cartographer 构建 2D 栅格地图。

### 2. 定位 (Localization)
- [ ] **AMCL**：自适应蒙特卡洛定位，理解粒子云如何收敛。

### 3. Nav2 架构 (规划与控制)
- [ ] **全局规划 (Global Planner)**：A*, Dijkstra (如何在大地图找路)。
- [ ] **局部规划 (Controller)**：
    - **DWA** (动态窗口法)：适合差速车。
    - **TEB** (时间弹性带)：适合阿克曼转向（类车机器人）。
- [ ] **Costmap (代价地图)**：理解膨胀层 (Inflation)、障碍物层。
- [ ] **Behavior Tree (行为树)**：理解导航任务的逻辑流。

---

## 🦾 阶段 4：机械臂控制 (MoveIt 2) —— ME 核心领域
**⏱️ 耗时：3-4 周**
*目标：结合运动学知识，实现高精度轨迹规划与抓取。*

### 1. 理论基础 (复习)
- [ ] **正/逆运动学 (FK/IK)**：DH 参数表。
- [ ] **雅可比矩阵 (Jacobian)**：速度与奇异点分析。

### 2. MoveIt 2 实战
- [ ] **配置助手**：使用 `MoveIt Setup Assistant` 为 URDF 生成配置包 (SRDF)。
- [ ] **运动规划**：
    - 理解 **OMPL** 库 (RRT, RRT*, PRM 等采样算法)。
- [ ] **编程接口 (MoveGroupInterface)**：
    - 实现：让机械臂末端到达指定空间坐标 `(x, y, z, roll, pitch, yaw)`。
    - 笛卡尔路径规划 (直线运动)。
- [ ] **场景避障**：在规划场景中添加障碍物，观察机械臂如何绕行。

---

## 🔌 阶段 5：硬件落地与嵌入式
**⏱️ 耗时：持续进行**
*目标：从仿真走向真机实战。*

### 1. 下位机通信
- [ ] **Micro-ROS**：在 STM32 或 ESP32 上运行轻量级 ROS 节点。
- [ ] **通信协议**：串口 (UART) 通信协议的封装与解析。

### 2. 闭环控制
- [ ] 读取编码器 -> 计算里程计 (Odom) -> 发布 TF。
- [ ] 接收 `cmd_vel` -> PID 计算 -> 电机 PWM 输出。

### 3. 传感器驱动
- [ ] 编译运行激光雷达 (Rplidar/Slamtec) 或深度相机 (RealSense/Oak-D) 的 ROS 2 驱动。

---

## 📚 学习资源与避坑指南

### 推荐教程
1.  **官方文档**：[ROS 2 Documentation](https://docs.ros.org/) (最权威，遇到报错先查这里)
2.  **鱼香 ROS**：[https://fishros.com/](https://fishros.com/) (提供一键安装脚本，极大降低入门门槛)
3.  **古月居**：[https://www.guyuehome.com/](https://www.guyuehome.com/) (国内最丰富的中文社区)
4.  **The Construct**：YouTube 频道，提供非常好的实战演示。

### 给机械硕士的特别建议
> 💡 **重后端，轻前端**：
> 不要花太多时间去学习如何用 Qt 写一个漂亮的上位机界面，那不是你的核心竞争力。
>
> 💡 **算法是核心**：
> 你的优势在于数学。当导航效果不好时，去研究 MPC 控制器、EKF 状态估计的协方差矩阵，而不是盲目改参数。
>
> 💡 **C++ 是必经之路**：
> 虽然 Python 写起来快，但在复杂的控制算法和工业部署中，C++ 是必须掌握的硬技能。

---
*祝你的 ROS 学习之路顺利！*
